{{ define "title" }}
{{- .Title -}}
{{ end }}

{{ define "css" }}

{{ if .Site.Params.highlightjs }}
{{ if .Site.Params.highlightjsTheme }}
<link rel="stylesheet" data-highlight href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release/build/styles/{{ .Site.Params.highlightjsTheme }}.min.css" />
{{ else }}
<link rel="stylesheet" data-highlight href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release/build/styles/default.min.css" />
{{ end }}
{{ end }}

{{ if .Site.Params.valine }}
<script src='//unpkg.com/valine/dist/Valine.min.js'></script>
{{ end }}

{{ end }}

{{ define "main" }}
<div class="ui centered relaxed grid dream-grid">
    <div class="sixteen wide mobile sixteen wide tablet twelve wide computer column markdown-body dream-single" id="dream-save-post-as-img">
        {{ if and .Params.Cover .Site.Params.showSummaryCoverInPost }}
        <section class="ui top attached segment cover">
            <div class="cover-img" style="background-image: url('{{ .Params.Cover }}');"></div>
        </section>
        {{ end }}
        <section class="ui {{ if not .Site.Params.showSummaryCoverInPost }}top {{ end }}attached segment">
            <header>
                <h1 class="ui large header">
                    {{ .Title }}
                    <div class="sub header">
                        Publi√© le {{ .PublishDate.Day }} {{ index $.Site.Data.mois (printf "%d" .PublishDate.Month) }}
                        {{ .PublishDate.Year }}
                    </div>
                </h1>
            </header>
            <article class="main">{{ .Content | emojify }}</article>
        </section>

        <footer class="ui attached segment" data-html2canvas-ignore>
            {{ if isset .Params "tags" }}
            {{ range $tag := .Params.tags }}
            <a class="ui label" href="{{ `tags/` | relLangURL }}{{ $tag | urlize }}" title="{{ $tag }}">#{{ $tag }}</a>
            {{ end }}
            {{else}}<i class="award red icon"></i>
                {{ end }}
                {{if .Draft }}
                <i class="firstdraft red icon" title="brouillon"></i>
                {{end}}
                {{if or .PublishDate .ExpiryDate }}
                <div class="ui yellow image label bee-edit">
                    <i class="clock outline icon"></i>
                    {{if .PublishDate}}<span title="date publication">{{.PublishDate.Format "2006-01-02"}}</span>{{end}}
                    {{if .ExpiryDate}}
                    <div class="detail" title="date expiration">{{.ExpiryDate.Format "2006-01-02"}}</div>
                    {{end}}
                </div>
                {{end}}
                <a class="ui link green float right label bee-edit bee-edit-open" 
                data-isserver="{{.Site.IsServer}}" data-path="{{.File.Path}}"
                 title="Editer la page...">
                    <i class="edit icon"></i>
                </a>
                <a class="ui label" style="float: right; cursor: pointer;" onclick="savePostAsImg()">
                    <i class="save icon"></i>{{ i18n "saveAsImage" }}
                </a>
        </footer>

        {{ if .Site.Copyright }}
        <footer class="ui attached segment" data-html2canvas-ignore>
            {{ .Site.Copyright | safeHTML }}
        </footer>
        {{ end }}

    </div>
    <div class="sixteen wide mobile sixteen wide tablet four wide computer column">
        {{ partial "header.html" . }}
    </div>
</div>
{{ end }}

{{ define "js" }}
<script src="{{ `/js/html2canvas.min.js` | relURL }}"></script>
<script src="{{ `/js/post.js` | relURL }}"></script>

{{ if .Site.Params.highlightjs }}
<script src="{{ if .Site.Params.highlightjsCDN }}{{ .Site.Params.highlightjsCDN }}{{ else }}{{ "https://cdn.jsdelivr.net/gh/highlightjs/cdn-release/build/highlight.min.js" }}{{ end}}"></script>

{{ if .Site.Params.highlightjsExtraLanguages }}
{{ range .Site.Params.highlightjsExtraLanguages }}
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release/build/languages/{{ . }}.min.js"></script>
{{ end }}
{{ end }}

{{ partial "highlight.html" . }}
{{ end }}

{{ end }}